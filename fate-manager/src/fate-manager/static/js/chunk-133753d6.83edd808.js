(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-133753d6"],{"1af6":function(t,e,a){var s=a("63b6");s(s.S,"Array",{isArray:a("9003")})},"20fd":function(t,e,a){"use strict";var s=a("d9f6"),i=a("aebd");t.exports=function(t,e,a){e in t?s.f(t,e,i(0,a)):t[e]=a}},2737:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABHNCSVQICAgIfAhkiAAAANhJREFUOE/lk7ENwjAQRf+ZBRjBFBA6YALIBozACCmBBtIklIzABqwQNkiHUsWT+JAjjJIAskGkwu3Jz+/+nQk/OmQ5g23B3zDLJKgY3YHsCy4720H3Ri6Tdv2t0R+1ZqfDQAwtMnUYZnJ9lRBiRYyoTIO+9x4xaAZmCcKOgCkDORgxiJRKRrkXqDJh5EQ4mwtmGA9LLUJj6AfSIgTpIxEmTyDmi0rHCy9Q3cCC6v/Te7Pv+ZysUX0h+ROjdkYN0KuMXF9DboolwBERzY0JuLe3QTcycoFc9Rsk+pMTAOdfrgAAAABJRU5ErkJggg=="},"549b":function(t,e,a){"use strict";var s=a("d864"),i=a("63b6"),n=a("241e"),o=a("b0dc"),l=a("3702"),c=a("b447"),r=a("20fd"),p=a("7cd6");i(i.S+i.F*!a("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var e,a,i,d,u=n(t),f="function"==typeof this?this:Array,v=arguments.length,h=v>1?arguments[1]:void 0,m=void 0!==h,g=0,y=p(u);if(m&&(h=s(h,v>2?arguments[2]:void 0,2)),void 0==y||f==Array&&l(y))for(e=c(u.length),a=new f(e);e>g;g++)r(a,g,m?h(u[g],g):u[g]);else for(d=y.call(u),a=new f;!(i=d.next()).done;g++)r(a,g,m?o(d,h,[i.value,g],!0):i.value);return a.length=g,a}})},"54a1":function(t,e,a){a("6c1c"),a("1654"),t.exports=a("95d5")},"5b35":function(t,e,a){"use strict";var s=a("d415"),i=a.n(s);i.a},"5bf3":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABHNCSVQICAgIfAhkiAAAANtJREFUOE/lk0EOwUAUhv+/J3AEN8AJ6A0cwUpjZ6E2NDQkNhJ20p0buAI36BEcRN6TVibaIjOEldm+zDff+98b4kuHhrNcJ/oJczoKcsbvQOYFm53p4PdGNpNq/aXRH7VmpqOKGJBjFA6Oq82ufrl4PQLDaRjUnPeIwpZ4WqdiBqIJRapE7AnPk3E/dQLlJkRK4JBdyIZxtxQ/M3QEiQ9yS7DxCMIpCoOOE6hoYEDF/+m82bd8ZG+Migup+oZRNaMy6ElGtq+xWCddKIYk2pkJIHMTdCkjG8hWvwJU3ZYTVaQrBgAAAABJRU5ErkJggg=="},"5ed4":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sitemanage"},[s("div",{staticClass:"site-item"},[t._m(0),s("div",{staticClass:"site-title"},[s("div",{staticClass:"site-item-text"},[s("tooltip",{attrs:{width:"282px",content:t.myInstitution.federatedOrganization,placement:"top"}})],1),s("div",{staticClass:"site-item-text"},[s("tooltip",{attrs:{width:"282px",content:t.myInstitution.institutions,placement:"top"}})],1),s("div",{staticClass:"site-item-text"},[t._v(t._s(t.myInstitution.size))]),s("div",{staticClass:"site-item-text"},[t._v(t._s(t._f("dateFormat")(t.myInstitution.createTime)))])])]),s("div",{staticClass:"sitemanage-box"},[s("div",{staticClass:"add-site"},["Admin"===t.role.roleName?s("span",[s("el-tooltip",{attrs:{effect:"dark",content:"Add a new site to join a federated organization",placement:"right"}},[s("div",{staticClass:"add",on:{click:t.toAddSite}},[s("span",[t._v("Add")])])]),t.siteState?s("span",[1===t.applyStatus?s("div",{staticClass:"app"},[s("span",[t._v("You have applied to view the fate manager sites of\n                          "),t._l(t.applyStatusList,function(e,a){return s("span",{key:a},[a===t.applyStatusList.length-1?s("span",[t._v(t._s(e.desc))]):s("span",[t._v(" "+t._s(e.desc)+",")])])})],2),s("span",{staticStyle:{"margin-left":"10px"}},[t._v("Please wait for the approval of Cloud Manager…")])]):t._e(),3===t.applyStatus?s("div",{staticClass:"apply"},[t.showapplyBtn?s("span",{staticClass:"apply-click",on:{click:t.showApply}},[t._v("\n                          Apply to view other FATE Manager sites.\n                      ")]):s("span",{staticClass:"apply-click",staticStyle:{color:"#848C99",cursor:"not-allowed"}},[t._v("Apply to view other FATE Manager sites.")]),s("el-popover",{attrs:{placement:"bottom","visible-arrow":!1,width:"700",offset:-340,"popper-class":"site-history",trigger:"click"}},[s("div",{staticClass:"content"},[s("div",{staticClass:"title"},[s("div",{staticClass:"title-time"},[t._v("Time")]),s("div",{staticClass:"title-history"},[t._v("History")])]),s("div",{staticClass:"content-box"},t._l(t.siteHistoryList,function(e,a){return s("div",{key:a},[s("div",{staticClass:"title-time"},[t._v(t._s(t._f("dateFormat")(e.applyTime)))]),s("div",{staticClass:"title-history"},[e.agree.length>0?s("span",[t._v("\n                                              Cloud Manager agreed your application to view the fate manager sites of\n                                              "),t._l(e.agree,function(a,i){return s("span",{key:i},[i===e.agree.length-1?s("span",[t._v(t._s(a))]):s("span",[t._v(t._s(a)+",")])])})],2):t._e(),e.reject.length>0?s("span",[e.agree.length>0?s("span",[t._v(" ,and cloud")]):s("span",[t._v(" Cloud")]),t._v("\n                                              Manager reject your application to view the fate manager sites of\n                                              "),t._l(e.reject,function(a,i){return s("span",{key:i},[i===e.reject.length-1?s("span",[t._v(t._s(a))]):s("span",[t._v(t._s(a)+",")])])})],2):t._e(),e.cancel.length>0?s("span",[e.agree.length>0||e.reject.length>0?s("span",[t._v(" ,and cloud")]):s("span",[t._v(" Cloud")]),t._v("\n                                              Manager cancel your application to view the fate manager sites of\n                                              "),t._l(e.cancel,function(a,i){return s("span",{key:i},[i===e.cancel.length-1?s("span",[t._v(t._s(a))]):s("span",[t._v(t._s(a)+",")])])})],2):t._e()])])}),0)]),s("img",{staticClass:"tickets",attrs:{slot:"reference",src:a("2737"),alt:""},on:{click:t.gethistory},slot:"reference"})])],1):t._e()]):t._e()],1):s("span",[t._m(1),t.siteState?s("div",{staticClass:"apply",staticStyle:{cursor:"not-allowed",color:"#c8c9cc"}},[s("span",[t._v("Apply to view other FATE Manager sites. ")]),s("img",{staticClass:"tickets",staticStyle:{cursor:"not-allowed"},attrs:{slot:"reference",src:a("5bf3"),alt:""},slot:"reference"})]):t._e()])]),s("div",{staticClass:"site-name"},[s("div",{staticClass:"name-left"},[s("span",{staticClass:"institution-title"},[t._v("My Institution")]),s("span",{staticClass:"institution-text"},[s("tooltip",{attrs:{width:"170px",content:t.myInstitution.fateManagerInstitutions,placement:"top"}})],1),s("span",{staticClass:"size-title"},[t._v("Size")]),s("span",{staticClass:"size-num"},[t._v(t._s(t.myInstitution.joinedSites))])]),s("div",{staticClass:"name-right"},[s("span",{staticClass:"right-text"},[t._v("My site has been applied to view by")]),t.viewContent.institutions&&t.viewContent.institutions.length>0?s("el-tooltip",{attrs:{effect:"dark",placement:"bottom"}},[s("span",{attrs:{slot:"content"},slot:"content"},t._l(t.viewContent.institutions,function(e,a){return s("span",{key:a},[a===t.viewContent.institutions.length-1?s("span",[t._v(t._s(e))]):s("span",[t._v(" "+t._s(e)+",")])])}),0),s("span",{staticClass:"right-num"},[t._v(t._s(t.viewContent.institutions.length))])]):s("span",{staticClass:"right-num"},[t._v(t._s(0))]),s("span",{staticClass:"right-title"},[t._v("FATE Managers")]),s("span",{staticClass:"refresh"},[s("i",{staticClass:"el-icon-refresh-right",on:{click:t.getList}})])],1)]),s("el-table",{staticClass:"site-table",attrs:{data:t.myInstitution.siteList,"header-row-class-name":"tableHead","header-cell-class-name":"tableHeadCell","cell-class-name":"tableCell","tooltip-effect":"light"}},[s("el-table-column",{attrs:{prop:"siteName",label:"Site Name","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticStyle:{color:"#217AD9",cursor:"pointer"},on:{click:function(a){return t.toSietInfo(e.row)}}},[t._v(t._s(e.row.siteName))])]}}])}),s("el-table-column",{attrs:{prop:"status.desc",label:"Status"}}),s("el-table-column",{attrs:{prop:"role.desc",label:"Role"}}),s("el-table-column",{attrs:{prop:"partyId",label:"Party ID"}}),s("el-table-column",{attrs:{prop:"acativationTime",label:"Activation Time"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("dateFormat")(e.row.acativationTime)))])]}}])})],1),t.siteState?s("span",t._l(t.otherSiteList,function(e,a){return s("span",{key:a},[s("div",{staticClass:"site-name"},[s("div",{staticClass:"name-left"},[s("span",{staticClass:"institution-title"},[t._v("Institution")]),s("span",{staticClass:"institution-text"},[s("tooltip",{attrs:{width:"170px",content:e.fateManagerInstitutions,placement:"top"}})],1),s("span",{staticClass:"size-title"},[t._v("Size")]),s("span",{staticClass:"size-num"},[t._v(t._s(e.size))])])]),s("el-table",{staticClass:"site-table",attrs:{data:e.siteList,"header-row-class-name":"tableHead","header-cell-class-name":"tableHeadCell","cell-class-name":"tableCell","tooltip-effect":"light"}},[s("el-table-column",{attrs:{prop:"siteName",label:"Site Name","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"status.desc",label:"Status"}}),s("el-table-column",{attrs:{prop:"role.desc",label:"Role"}}),s("el-table-column",{attrs:{prop:"partyId",label:"Party ID"}}),s("el-table-column",{attrs:{prop:"acativationTime",label:"Activation Time"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("dateFormat")(e.row.acativationTime)))])]}}],null,!0)})],1)],1)}),0):t._e()],1),s("el-dialog",{staticClass:"apply-dialog",attrs:{visible:t.applydialog,width:"700px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.applydialog=e}}},[s("div",{staticClass:"dialog-box"},[s("div",{staticClass:"dialog-title"},[t._v("\n              Apply\n          ")]),s("div",{staticClass:"line-text-one"},[t._v("\n              Please select the FATE Manager you want to view.\n          ")]),s("div",{staticClass:"line-text-one"},[t._v("\n              After submitting the application, please wait for the Cloud Manager’s approval.\n          ")]),s("div",{staticClass:"dialog-main"},[s("el-checkbox-group",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.checkboxList,function(t,e){return s("div",{key:e},[s("el-checkbox",{attrs:{disabled:t.disable,label:t.institutions}})],1)}),0)],1),s("div",{staticClass:"dialog-foot"},[s("el-button",{attrs:{type:"primary",disabled:t.checkList.length-t.applyed.length===0},on:{click:t.toApply}},[t._v("OK")]),s("el-button",{attrs:{type:"info"},on:{click:function(e){t.applydialog=!1}}},[t._v("Cancel")])],1)])]),s("el-dialog",{staticClass:"apply-not-pass",attrs:{visible:t.applynotpass,width:"700px"},on:{"update:visible":function(e){t.applynotpass=e}}},[t.agreedList.length>0?s("span",[s("div",{staticClass:"line-text-one"},[t._v("Cloud Manager agreed  your application")]),s("div",{staticClass:"line-text-one"},[t._v("to view the fate manager sites of ")]),s("div",{staticClass:"line-text-one"},t._l(t.agreedList,function(e,a){return s("span",{key:a,staticClass:"span"},[a===t.agreedList.length-1?s("span",[t._v(t._s(e))]):s("span",[t._v(t._s(e)+",")])])}),0)]):t._e(),t.rejectList.length>0?s("span",[s("div",{staticClass:"line-text-one"},[t.agreedList.length>0?s("span",[t._v("and cloud")]):s("span",[t._v("Cloud")]),t._v("\n              Manager reject  your application\n          ")]),s("div",{staticClass:"line-text-one"},[t._v("to view the fate manager sites of ")]),s("div",{staticClass:"line-text-one"},t._l(t.rejectList,function(e,a){return s("span",{key:a,staticClass:"span"},[a===t.rejectList.length-1?s("span",[t._v(t._s(e))]):s("span",[t._v(t._s(e)+",")])])}),0)]):t._e(),t.cancelList.length>0?s("span",[s("div",{staticClass:"line-text-one"},[t.rejectList.length>0?s("span",[t._v("and cloud")]):s("span",[t._v("Cloud")]),t._v("\n              Manager cancel  your application\n          ")]),s("div",{staticClass:"line-text-one"},[t._v("to view the fate manager sites of ")]),s("div",{staticClass:"line-text-one"},t._l(t.rejectList,function(e,a){return s("span",{key:a,staticClass:"span"},[a===t.rejectList.length-1?s("span",[t._v(t._s(e))]):s("span",[t._v(t._s(e)+",")])])}),0)]):t._e(),s("div",{staticClass:"dialog-footer"},[s("el-button",{staticClass:"ok-btn",attrs:{type:"primary"},on:{click:t.toapplynotpass}},[t._v("OK")])],1)])],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"site-title"},[a("div",{staticClass:"site-item-title"},[t._v("Federated Organization")]),a("div",{staticClass:"site-item-title"},[t._v("Institution")]),a("div",{staticClass:"site-item-title"},[t._v("Organization Size")]),a("div",{staticClass:"site-item-title"},[t._v("Creation Time")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add",staticStyle:{cursor:"not-allowed","background-color":"#c8c9cc"}},[a("span",[t._v("Add")])])}],n=a("75fc"),o=(a("ac6a"),a("cebc")),l=a("c1df"),c=a.n(l),r=a("2f62"),p=a("a5b0"),d=a("3191"),u={name:"homeview",filters:{dateFormat:function(t){return t?c()(t).format("YYYY-MM-DD HH:mm:ss"):"--"}},components:{tooltip:p["a"]},data:function(){return{checkList:[],checkboxList:[],showapplyBtn:!1,applydialog:!1,applynotpass:!1,applynotList:[],myInstitution:[],otherSiteList:[],viewContent:{},applyed:[],applyStatus:3,applyStatusList:[],agreedList:[],rejectList:[],cancelList:[],siteHistoryList:[]}},computed:Object(o["a"])({},Object(r["mapGetters"])(["role","siteState"])),created:function(){var t=this;this.$nextTick(function(){t.getList(),t.getapplyList()})},mounted:function(){},methods:{getList:function(){var t=this;Object(d["u"])().then(function(e){e.data&&(t.myInstitution=e.data[0],t.myInstitution.joinedSites=0,t.myInstitution.siteList=e.data[0].siteList.map(function(a){return 2===a.status.code&&(t.myInstitution.joinedSites+=1),a.federatedId=e.data[0].federatedId,a}))}),Object(d["h"])().then(function(e){t.viewContent=e.data}),Object(d["v"])().then(function(e){t.otherSiteList=[],e.data&&e.data.forEach(function(e,a){t.otherSiteList.push(e)})}),Object(d["d"])().then(function(e){t.applyStatusList=e.data||[],e.data&&Object(n["a"])(e.data).every(function(t){return 1===t.code})?t.applyStatus=1:e.data&&Object(n["a"])(e.data).some(function(t){return 2===t.code||3===t.code||4===t.code})?(t.applyStatus=2,t.applynotpass=!0):t.applyStatus=3,e.data&&e.data.forEach(function(e){2===e.code?t.agreedList.push(e.desc):3===e.code?t.rejectList.push(e.desc):4===e.code&&t.cancelList.push(e.desc)})})},toAddSite:function(){this.$router.push({path:"/welcome/register"})},toSietInfo:function(t){this.$router.push({name:"siteinfo",path:"/siteinfo/index",query:{federatedId:t.federatedId,partyId:t.partyId}})},getapplyList:function(){var t=this;Object(d["n"])().then(function(e){t.showapplyBtn=e.data.length>0})},showApply:function(){var t=this;this.checkList=[],this.otherSiteList&&this.otherSiteList.forEach(function(e){t.checkList.push(e.fateManagerInstitutions),t.applyed=t.checkList}),Object(d["n"])().then(function(e){t.checkboxList=e.data.map(function(e){return t.checkList.forEach(function(t){t===e.institutions&&(e.disable=!0)}),e}),t.applydialog=!0})},toApply:function(){var t=this,e=this.checkList.filter(function(e){return-1===t.applyed.indexOf(e)}),a={authorityInstitutions:e};Object(d["e"])(a).then(function(e){t.applydialog=!1,t.getList()})},toapplynotpass:function(){var t=this;Object(d["x"])().then(function(e){t.applyStatus=2,t.applynotpass=!1,t.getList()})},gethistory:function(){var t=this;this.siteHistoryList=[],Object(d["c"])().then(function(e){e.data&&e.data.forEach(function(e){var a={agree:[],reject:[],cancel:[]};a.applyTime=e.applyTime,JSON.parse(e.content).forEach(function(t){2===t.code?a.agree.push(t.desc):3===t.code?a.reject.push(t.desc):4===t.code&&a.cancel.push(t.desc)}),t.siteHistoryList.push(a)})})}}},f=u,v=(a("b282"),a("2877")),h=Object(v["a"])(f,s,i,!1,null,null,null);e["default"]=h.exports},"75fc":function(t,e,a){"use strict";var s=a("a745"),i=a.n(s);function n(t){if(i()(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}var o=a("774e"),l=a.n(o),c=a("c8bb"),r=a.n(c);function p(t){if(r()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return l()(t)}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(t){return n(t)||p(t)||d()}a.d(e,"a",function(){return u})},"774e":function(t,e,a){t.exports=a("d2d5")},9003:function(t,e,a){t.exports=a("0b93")(176)},"95d5":function(t,e,a){var s=a("40c3"),i=a("5168")("iterator"),n=a("481b");t.exports=a("584a").isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||n.hasOwnProperty(s(e))}},a5b0:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tooltip",style:t.elmwidth},[t.tooltip?a("el-tooltip",{attrs:{effect:"light",content:t.content,placement:t.placement}},[a("span",{ref:"name"},[t._v("\n              "+t._s(t.content)+"\n          ")])]):a("span",{ref:"name"},[t._v("\n          "+t._s(t.content)+"\n      ")])],1)},i=[],n=(a("7f7f"),{name:"OverflowTooltip",props:{width:{type:String,default:""},content:{type:String,default:""},placement:{type:String,default:"top"}},data:function(){return{tooltip:!1,elmwidth:""}},created:function(){},updated:function(){this.updatawidth()},mounted:function(){this.elmwidth="width:".concat(this.width),this.updatawidth()},methods:{updatawidth:function(){var t=this.$refs.name.offsetWidth;t>parseInt(this.width)?this.tooltip=!0:this.tooltip=!1}}}),o=n,l=(a("5b35"),a("2877")),c=Object(l["a"])(o,s,i,!1,null,null,null);e["a"]=c.exports},a745:function(t,e,a){t.exports=a("f410")},aebd:function(t,e,a){t.exports=a("0b93")(26)},b282:function(t,e,a){"use strict";var s=a("b6f1"),i=a.n(s);i.a},b6f1:function(t,e,a){},c8bb:function(t,e,a){t.exports=a("54a1")},d2d5:function(t,e,a){a("1654"),a("549b"),t.exports=a("584a").Array.from},d415:function(t,e,a){},f410:function(t,e,a){a("1af6"),t.exports=a("584a").Array.isArray}}]);