(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4cfa1115"],{"3ccf":function(t,e,a){"use strict";var n=a("62b2"),i=a.n(n);i.a},"62b2":function(t,e,a){},b940:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"auto"},[a("div",{staticClass:"auto-box"},[a("div",{staticClass:"serve-title"},[a("div",{staticClass:"Service-inline"},[t._v("Site Service Management")]),a("div",{staticClass:"inline"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline,size:"mini"}},[a("el-form-item",{attrs:{label:"PartyID"}},[a("el-select",{class:{"option-select":t.showwarn},attrs:{placeholder:""},on:{change:t.tochangepartyId},model:{value:t.formInline.partyId,callback:function(e){t.$set(t.formInline,"partyId",e)},expression:"formInline.partyId"}},t._l(t.partyId,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t.showwarn?a("div",{staticClass:"option-partyId"},[t._v("The PartyID is required.")]):t._e()],1),a("el-form-item",{staticClass:"form-item",attrs:{label:"Site name :"}},[a("span",{staticStyle:{color:"#217AD9"}},[t._v(t._s(t.formInline.siteName))])])],1)],1)]),a("div",{staticClass:"row-content"},[a("el-radio-group",{staticClass:"radio",on:{change:t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-radio-button",{attrs:{label:"FATE"}}),a("el-radio-button",{attrs:{disabled:"",label:"FATE Serving"}})],1)],1),a("div",{staticClass:"serve-content"},[a("div",{staticClass:"table"},[a("el-table",{attrs:{data:t.tableData,"header-row-class-name":"tableHead","header-cell-class-name":"tableHeadCell","cell-class-name":"tableCell",height:"100%","tooltip-effect":"light"}},[a("el-table-column",{attrs:{type:"index",label:"Index",width:"90"}}),a("el-table-column",{attrs:{prop:"componentName",align:"center",label:"FATE component"}}),a("el-table-column",{attrs:{prop:"componentVersion",align:"center",label:"Version"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"Node"}}),a("el-table-column",{attrs:{prop:"finishTime",align:"center",label:"Deployment time"}}),a("el-table-column",{attrs:{prop:"deployStatus.desc",align:"center",label:"Deploy status"}}),a("el-table-column",{attrs:{prop:"status.desc",align:"center",label:"Status"}}),a("el-table-column",{attrs:{prop:"",align:"right",label:"Action"}})],1)],1),a("div",{staticClass:"content"},[a("div",{staticClass:"text"},[t._v("I havenâ€™t deployed any FATE components yet,\n              "),a("span",{staticClass:"text-click",on:{click:function(e){t.selectdialog=!0}}},[t._v("start deploying")])]),a("div",{staticClass:"text"},[t._v("I have deployed FATE,\n              "),a("span",{staticClass:"text-click",on:{click:function(e){t.methoddialog=!0}}},[t._v("connect")])])])])]),a("el-dialog",{staticClass:"auto-dialog",attrs:{visible:t.autodialog,width:"700px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.autodialog=e}}},[a("div",{staticClass:"dialog-box"},[a("div",{staticClass:"dialog-title"},[t._v("\n          "+t._s(t.typeUrl)+"\n          Service URL\n      ")]),a("div",{class:{input:!0,"input-warn":t.warn}},[a("el-input",{attrs:{placeholder:"Type the address like: 192.168.0.1 or 192.168.0.1:8080"},on:{focus:function(e){t.warn=!1}},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}}),t.warn?a("div",{staticClass:"text-warn"},[t._v("Please enter the address.")]):t._e()],1),a("div",{staticClass:"dialog-foot"},[a("el-button",{attrs:{type:"primary"},on:{click:t.toService}},[t._v("Start")]),a("el-button",{attrs:{type:"info"},on:{click:function(e){t.autodialog=!1}}},[t._v("Cancel")])],1)])]),a("el-dialog",{staticClass:"auto-dialog",attrs:{visible:t.connecdialog,width:"500px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.connecdialog=e}}},[a("div",{staticClass:"dialog-box"},[a("div",{staticStyle:{"text-align":"center","font-size":"24px"}},[t._v("\n              Connection failed !\n          ")]),a("div",{staticClass:"dialog-foot"},[a("el-button",{attrs:{type:"primary"},on:{click:t.toRetry}},[t._v("Retry")]),a("el-button",{attrs:{type:"info"},on:{click:function(e){t.connecdialog=!1}}},[t._v("Cancel")])],1)])]),a("el-dialog",{staticClass:"select-dialog",attrs:{visible:t.selectdialog,width:"700px"},on:{"update:visible":function(e){t.selectdialog=e}}},[a("div",{staticClass:"dialog-title"},[t._v("\n          Please select deployment method\n      ")]),a("div",{staticClass:"dialog-box"},[a("div",{staticClass:"dialog-foot"},[a("el-button",{attrs:{type:"primary"},on:{click:t.toAnsible}},[t._v("Deploy by Ansible")])],1),a("div",{staticClass:"dialog-foot"},[a("el-button",{attrs:{type:"primary"},on:{click:t.toKubeFATE}},[t._v("Deploy by KubeFATE")])],1)])]),a("el-dialog",{staticClass:"method-dialog",attrs:{visible:t.methoddialog,width:"700px"},on:{"update:visible":function(e){t.methoddialog=e}}},[a("div",{staticClass:"dialog-title"},[t._v("\n          Please select deployment method\n      ")]),a("div",{staticClass:"dialog-box"},[a("el-radio-group",{on:{change:t.changeMethod},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("div",{class:{input:!0,"input-warn":t.warnKubeFATE}},[a("el-radio",{attrs:{label:"KubeFATE"}},[t._v("By KubeFATE")]),a("el-input",{attrs:{disabled:"KubeFATE"!==t.radio,placeholder:"Type the KubeFATE address like: 192.168.0.1:8080"},on:{focus:function(e){t.warnKubeFATE=!1}},model:{value:t.addressKubeFATE,callback:function(e){t.addressKubeFATE=e},expression:"addressKubeFATE"}}),t.warnKubeFATE?a("div",{staticClass:"text-warn"},[t._v("The address is invalid. Please enter again.")]):t._e()],1),a("div",{class:{input:!0,"input-warn":t.warnAnsible}},[a("el-radio",{attrs:{label:"Ansible"}},[t._v("By Ansible")]),a("el-input",{attrs:{disabled:"Ansible"!==t.radio,placeholder:"Type the deploy server address like: 192.168.0.1:8080"},on:{focus:function(e){t.warnAnsible=!1}},model:{value:t.addressAnsible,callback:function(e){t.addressAnsible=e},expression:"addressAnsible"}}),t.warnAnsible?a("div",{staticClass:"text-warn"},[t._v("The address is invalid. Please enter again.")]):t._e()],1)])],1),a("div",{staticClass:"dialog-foot"},[a("el-button",{attrs:{type:"primary"},on:{click:t.toConnection}},[t._v("OK")]),a("el-button",{attrs:{type:"info"},on:{click:t.toCancel}},[t._v("Cancel")])],1)])],1)},i=[],o=(a("ac6a"),a("cebc")),s=a("2f62"),r=a("41db"),l=a("de61"),c=a("d846"),d={name:"auto",data:function(){return{tableData:[],connecdialog:!1,showwarn:!1,autodialog:!1,selectdialog:!1,methoddialog:!1,warnKubeFATE:!1,warnAnsible:!1,warn:!1,radio:"KubeFATE",formInline:{federatedId:parseInt(this.$route.query.federatedId)||this.$route.query.federatedId,siteName:this.$route.query.siteName,partyId:parseInt(this.$route.query.partyId),fateVersion:this.$route.query.fateVersion,deployType:this.$route.query.deployType},activeName:"FATE",address:"",addressKubeFATE:"",addressAnsible:"",tostatus:"",connectiontext:"",typeUrl:""}},watch:{},computed:Object(o["a"])({},Object(s["mapGetters"])(["organization","partyId"])),created:function(){var t=this;this.$store.dispatch("selectEnum").then(function(e){t.organization.forEach(function(e){e.label===t.formInline.federatedId&&(t.formInline.federatedId=parseInt(e.value))}),t.$store.dispatch("selectEnum",t.formInline.federatedId).then(function(e){t.topagesStep()})})},methods:{handleClick:function(t,e){},ansibleClick:function(){var t=this,e={partyId:this.formInline.partyId,productType:1,clickType:1};Object(c["b"])(e).then(function(e){t.topagesStep()})},kubefateClick:function(){var t=this,e={partyId:this.formInline.partyId,productType:1,clickType:1};Object(l["h"])(e).then(function(e){t.topagesStep()})},toAnsible:function(){this.selectdialog=!1,this.autodialog=!0,this.typeUrl="Ansible",this.autodialog=!0,this.warn=!1,this.address=""},toKubeFATE:function(){this.selectdialog=!1,this.typeUrl="KubeFATE",this.autodialog=!0,this.warn=!1,this.address=""},toService:function(){var t=this;if(this.connecdialog=!1,this.address)if("Ansible"===this.typeUrl){var e={ansbileUrl:this.address,partyId:this.formInline.partyId,productType:1};Object(r["a"])(e).then(function(e){t.ansibleClick()}).catch(function(e){t.connecdialog=!0})}else{var a={partyId:this.formInline.partyId,productType:1,kubenetesUrl:this.address};Object(r["n"])(a).then(function(e){t.kubefateClick()}).catch(function(e){t.connecdialog=!0})}else this.warn=!0},toserviceip:function(){this.formInline.partyId?(this.textTitle="KubeFATE address",this.textbtn="Ok",this.autodialog=!0,this.warn=!1,this.address=""):this.showwarn=!0},changeMethod:function(){this.addressKubeFATE="",this.addressAnsible="",this.warnKubeFATE=!1,this.warnAnsible=!1},toConnection:function(){var t=this;if("KubeFATE"===this.radio&&""===this.addressKubeFATE)this.warnKubeFATE=!0;else if("Ansible"===this.radio&&""===this.addressAnsible)this.warnAnsible=!0;else if("Ansible"===this.radio&&this.addressAnsible){this.warnAnsible=!1;var e={ansbileUrl:this.addressAnsible,partyId:this.formInline.partyId,productType:1};Object(r["a"])(e).then(function(e){t.toAnsible()}).catch(function(e){t.connecdialog=!0})}else if("KubeFATE"===this.radio&&this.addressKubeFATE){var a={partyId:this.formInline.partyId,productType:1,kubenetesUrl:this.addressKubeFATE||this.address};Object(r["n"])(a).then(function(e){t.kubefateClick()}).catch(function(e){t.connecdialog=!0})}},toRetry:function(){this.address?this.toService():this.toConnection()},toCancel:function(){this.methoddialog=!1,this.addressKubeFATE="",this.addressAnsible="",this.warnKubeFATE=!1,this.warnAnsible=!1},tochangepartyId:function(){var t=this;this.showwarn=!1,this.partyId.forEach(function(e){e.value===t.formInline.partyId&&(t.formInline.siteName=e.text)});var e={partyId:this.formInline.partyId};Object(r["b"])(e).then(function(e){t.formInline.fateVersion=e.data,t.topagesStep()})},topagesStep:function(){var t=this,e={partyId:this.formInline.partyId,productType:1};Object(r["i"])(e).then(function(e){switch(0===e.data.pageStatus.code&&t.$router.push({name:"auto",query:{siteName:t.formInline.siteName,partyId:t.formInline.partyId,fateVersion:t.formInline.fateVersion,deployType:t.formInline.deployType}}),e.data.deployType.code){case 1:5===e.data.pageStatus.code?t.$router.push({name:"service",query:{siteName:t.formInline.siteName,partyId:t.formInline.partyId,fateVersion:t.formInline.fateVersion,deployType:t.formInline.deployType}}):t.$router.push({name:"deploying",query:{siteName:t.formInline.siteName,partyId:t.formInline.partyId,fateVersion:t.formInline.fateVersion,deployType:t.formInline.deployType}});break;case 2:7===e.data.pageStatus.code?t.$router.push({name:"service",query:{siteName:t.formInline.siteName,partyId:t.formInline.partyId,fateVersion:t.formInline.fateVersion,deployType:t.formInline.deployType}}):t.$router.push({name:"ansible",query:{siteName:t.formInline.siteName,partyId:t.formInline.partyId,fateVersion:t.formInline.fateVersion,deployType:t.formInline.deployType}})}})}}},u=d,p=(a("3ccf"),a("2877")),f=Object(p["a"])(u,n,i,!1,null,null,null);e["default"]=f.exports},d846:function(t,e,a){"use strict";a.d(e,"m",function(){return o}),a.d(e,"o",function(){return s}),a.d(e,"p",function(){return r}),a.d(e,"j",function(){return l}),a.d(e,"i",function(){return c}),a.d(e,"c",function(){return d}),a.d(e,"k",function(){return u}),a.d(e,"l",function(){return p}),a.d(e,"f",function(){return f}),a.d(e,"a",function(){return b}),a.d(e,"e",function(){return h}),a.d(e,"n",function(){return m}),a.d(e,"b",function(){return y}),a.d(e,"h",function(){return v}),a.d(e,"g",function(){return g}),a.d(e,"d",function(){return I});var n=a("b775"),i="fate-manager";function o(t){return Object(n["a"])({url:"/".concat(i,"/api/dropdown/managernode"),method:"get",params:t})}function s(t){return Object(n["a"])({url:"/".concat(i,"/api/ansible/autoacquire"),method:"post",data:t})}function r(t){return Object(n["a"])({url:"/".concat(i,"/api/ansible/upload"),method:"post",data:t})}function l(t){return Object(n["a"])({url:"/".concat(i,"/api/ansible/componentlist"),method:"post",data:t})}function c(t){return Object(n["a"])({url:"/".concat(i,"/api/ansible/commit"),method:"post",data:t})}function d(t){return Object(n["a"])({url:"/".concat(i,"/api/ansible/install"),method:"post",data:t})}function u(t){return Object(n["a"])({url:"/".concat(i,"/api/ansible/installlist"),method:"post",data:t})}function p(t){return Object(n["a"])({url:"/".concat(i,"/api/dropdown/manager"),method:"get",params:t})}function f(t){return Object(n["a"])({url:"/".concat(i,"/api/ansible/update"),method:"post",data:t})}function b(t){return Object(n["a"])({url:"/".concat(i,"/api/ansible/autotest"),method:"post",data:t})}function h(t){return Object(n["a"])({url:"/".concat(i,"/api/ansible/testlist"),method:"post",data:t})}function m(t){return Object(n["a"])({url:"/".concat(i,"/api/ansible/log"),method:"post",data:t})}function y(t){return Object(n["a"])({url:"/".concat(i,"/api/ansible/click"),method:"post",data:t})}function v(t){return Object(n["a"])({url:"/".concat(i,"/api/ansible/autotest"),method:"post",data:t})}function g(t){return Object(n["a"])({url:"/".concat(i,"/api/ansible/upgrade"),method:"post",data:t})}function I(t){return Object(n["a"])({url:"/".concat(i,"/api/ansible/log"),method:"post",data:t})}},de61:function(t,e,a){"use strict";a.d(e,"c",function(){return o}),a.d(e,"g",function(){return s}),a.d(e,"d",function(){return r}),a.d(e,"b",function(){return l}),a.d(e,"e",function(){return c}),a.d(e,"j",function(){return d}),a.d(e,"f",function(){return u}),a.d(e,"a",function(){return p}),a.d(e,"l",function(){return f}),a.d(e,"k",function(){return b}),a.d(e,"h",function(){return h}),a.d(e,"i",function(){return m});var n=a("b775"),i="fate-manager";function o(t){return Object(n["a"])({url:"/".concat(i,"/api/deploy/prepare"),method:"get",params:t})}function s(t){return Object(n["a"])({url:"/".concat(i,"/api/deploy/pull"),method:"post",data:t})}function r(t){return Object(n["a"])({url:"/".concat(i,"/api/deploy/pulllist"),method:"post",data:t})}function l(t){return Object(n["a"])({url:"/".concat(i,"/api/deploy/installlist"),method:"post",data:t})}function c(t){return Object(n["a"])({url:"/".concat(i,"/api/deploy/testlist"),method:"post",data:t})}function d(t){return Object(n["a"])({url:"/".concat(i,"/api/deploy/commit"),method:"post",data:t})}function u(t){return Object(n["a"])({url:"/".concat(i,"/api/deploy/install"),method:"post",data:t})}function p(t){return Object(n["a"])({url:"/".concat(i,"/api/deploy/autotest"),method:"post",data:t})}function f(t){return Object(n["a"])({url:"/".concat(i,"/api/deploy/update"),method:"post",data:t})}function b(t){return Object(n["a"])({url:"/".concat(i,"/api/deploy/upgrade"),method:"post",data:t})}function h(t){return Object(n["a"])({url:"/".concat(i,"/api/deploy/click"),method:"post",data:t})}function m(t){return Object(n["a"])({url:"/".concat(i,"/api/deploy/fateboard"),method:"post",data:t})}}}]);