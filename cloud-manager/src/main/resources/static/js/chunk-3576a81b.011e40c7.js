(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3576a81b"],{"124f":function(t,e,a){},"2f21":function(t,e,a){"use strict";var i=a("79e5");t.exports=function(t,e){return!!t&&i(function(){e?t.call(null,function(){},1):t.call(null)})}},"3fc2":function(t,e,a){"use strict";var i=a("124f"),r=a.n(i);r.a},"55dd":function(t,e,a){"use strict";var i=a("5ca1"),r=a("d8e8"),n=a("4bf8"),o=a("79e5"),s=[].sort,l=[1,2,3];i(i.P+i.F*(o(function(){l.sort(void 0)})||!o(function(){l.sort(null)})||!a("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(n(this)):s.call(n(this),r(t))}})},"9fb8":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"partyid-box"},[a("div",{staticClass:"partyid"},[a("div",{staticClass:"partyid-header"},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:t.addPartyid}},[t._v("Add")]),a("el-input",{staticClass:"input input-placeholder",attrs:{clearable:"",placeholder:"Search ID Group"},model:{value:t.data.groupName,callback:function(e){t.$set(t.data,"groupName","string"===typeof e?e.trim():e)},expression:"data.groupName"}}),a("el-select",{staticClass:"sel-institutions input-placeholder",attrs:{placeholder:"Type"},model:{value:t.data.role,callback:function(e){t.$set(t.data,"role",e)},expression:"data.role"}},t._l(t.typeSelect,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),a("el-button",{staticClass:"go",attrs:{type:"primary"},on:{click:t.toSearch}},[t._v("GO")])],1),a("div",{staticClass:"partyid-body"},[a("div",{staticClass:"table"},[a("el-table",{attrs:{data:t.tableData,"header-row-class-name":"tableHead","header-cell-class-name":"tableHeadCell","cell-class-name":"tableCell",height:"100%","tooltip-effect":"light"}},[a("el-table-column",{attrs:{type:"index",label:"Index",width:"70"}}),a("el-table-column",{attrs:{prop:"groupName",label:"ID Group"}}),a("el-table-column",{attrs:{prop:"role",label:"Type"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1===e.row.role?"Guest":"Host"))])]}}])}),a("el-table-column",{attrs:{prop:"rangeInfo",label:"ID range","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"total",label:"Total"}}),a("el-table-column",{attrs:{prop:"used",label:"Used"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"delete",on:{click:function(a){return t.toUser(e.row)}}},[t._v(t._s(e.row.used))])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"Action",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-edit edit",on:{click:function(a){return t.handleEdit(e.row)}}})]),e.row.used?a("el-button",{attrs:{type:"text",disabled:""}},[a("i",{staticClass:"el-icon-delete-solid "})]):a("el-button",{attrs:{type:"text"}},[a("i",{staticClass:"el-icon-delete-solid delete",on:{click:function(a){return t.handleDelete(e.row)}}})])]}}])})],1)],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-size":t.data.pageSize,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)]),a("el-dialog",{staticClass:"partyid-delete-dialog",attrs:{visible:t.dialogVisible,width:"700px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"line-text-one"},[t._v('Are you sure you want to delete "'+t._s(t.groupName)+'"?')]),a("div",{staticClass:"line-text-two"},[t._v("You can't undo this action.")]),a("div",{staticClass:"dialog-footer"},[a("el-button",{staticClass:"ok-btn",attrs:{type:"primary"},on:{click:t.okAction}},[t._v("Ok")])],1)]),a("partyid-add",{ref:"partyidadd",attrs:{title:t.title}})],1)])},r=[],n=a("cebc"),o=a("75fc"),s=(a("ac6a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"partyid-add"},[a("el-dialog",{staticClass:"add-groud",attrs:{title:t.title,visible:t.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":t.cancelAction},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"groudform",attrs:{model:t.partidform,rules:t.rules,"label-position":"left","label-width":"128px"}},[a("el-form-item",{attrs:{label:"Name",prop:"groupName"}},[a("el-input",{class:{"edit-text":!0,groupNamewarn:t.groupNamewarn},on:{blur:t.toCheckGroupName,focus:function(e){return t.cancelValid("groupName")}},model:{value:t.partidform.groupName,callback:function(e){t.$set(t.partidform,"groupName","string"===typeof e?e.trim():e)},expression:"partidform.groupName"}})],1),a("el-form-item",{attrs:{label:"Type",prop:"role"}},["Edit"!==t.title?a("el-select",{staticClass:"edit-text select",attrs:{"popper-append-to-body":!1,placeholder:"Type"},model:{value:t.partidform.role,callback:function(e){t.$set(t.partidform,"role",e)},expression:"partidform.role"}},t._l(t.roleSelect,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1):t._e(),"Edit"===t.title?a("span",{staticClass:"info-text",staticStyle:{color:"#B8BFCC"}},[t._v(t._s(1===t.partidform.role?"Guest":"Host"))]):t._e()],1),a("el-form-item",{attrs:{label:"ID range",prop:"rangeInfo"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("span",[a("span",[t._v("ID range")]),a("el-tooltip",{attrs:{effect:"dark",placement:"bottom"}},[a("div",{staticStyle:{"font-size":"14px"},attrs:{slot:"content"},slot:"content"},["Edit"!==t.title?a("span",[a("div",[t._v("PartyID's coding rules are limited to natural Numbers only,")]),a("div",[t._v("and a natural number uniquely represents a party.")])]):t._e(),"Edit"===t.title?a("span",[a("div",[t._v("Support for adding new rules or modifying unused rules")]),a("div",[t._v("in addition to the used coding rules.")])]):t._e()]),a("i",{staticClass:"el-icon-info range-info"})])],1)]),a("el-input",{staticClass:"textarea",attrs:{type:"textarea",placeholder:"Enter an ID range like:10000~19999;11111"},on:{blur:t.toReset,focus:function(e){return t.cancelValid("rangeInfo")}},model:{value:t.partidform.rangeInfo,callback:function(e){t.$set(t.partidform,"rangeInfo","string"===typeof e?e.trim():e)},expression:"partidform.rangeInfo"}})],1)],1),a("div",{staticClass:"dialog-footer"},[a("el-button",{staticStyle:{"margin-right":"14px"},attrs:{type:"primary",disabled:t.submitbtn},on:{click:t.submitAction}},[t._v("Submit")]),a("el-button",{attrs:{type:"info"},on:{click:t.cancelAction}},[t._v("Cancel")])],1)],1)],1)}),l=[],d=(a("28a5"),a("55dd"),a("3b2b"),a("a481"),a("90e7")),c=a("34c7"),u={name:"partyadd",components:{},props:{title:{type:String,default:function(){return""}}},data:function(){var t=this;return{submitbtn:!0,dialogVisible:!1,checkPass:!1,groupNamewarn:!1,beenUsed:"",cannotEdit:null,partidform:{},roleSelect:[{value:1,label:"Guest"},{value:2,label:"Host"}],rules:{groupName:[{required:!0,trigger:"blur",validator:function(e,a,i){a?t.groupNamewarn?(t.groupNamewarn=!0,i(new Error("Group name exist! "))):i():(t.groupNamewarn=!0,i(new Error("Name field is required.")))}}],role:[{required:!0,trigger:"change",message:"Type field is required."}],rangeInfo:[{required:!0,trigger:"blur",validator:function(e,a,i){if(a){a=a.replace(/\s+/g,"");var r=new RegExp(/[\u4E00-\u9FA5]/g),n=new RegExp("[`!@#$^&*()=|{}':',\\[\\].<>/?！@#￥……&*（）——|{}【】‘：”“'。，、？]"),o=new RegExp(/[a-zA-Z]+/),s=a.split(/;+；+|；+;+|;+|；+/).sort(c).filter(function(t){return t}),l=s.every(function(t,e){var a,i=t.split(/~|-/).map(function(t){return parseInt(t)});return!(e>0&&(a=s[e-1].split(/~|-/).map(function(t){return parseInt(t)}),i[0]<(a[1]?a[1]:a[0])))&&(2!==i.length?!(1!==i.length||!i[0]):!!(i[0]<i[1]&&i[0]&&i[1])||void 0)});if(a)if(n.test(a)||o.test(a)||r.test(a)||!l)i(new Error("Invalid input."));else if(t.cannotEdit.intervalWithPartyIds.length>0||t.cannotEdit.sets.length>0){var d="";t.cannotEdit.forEach(function(t){t.region.leftRegion===t.region.rightRegion?d+='"'.concat(t.region.leftRegion,'" cannot be edited,in which ').concat(t.usedPartyIds,". it have been assigned to the sites. "):d+='"'.concat(t.region.leftRegion,"-").concat(t.region.rightRegion,'" cannot be edited,in which ').concat(t.usedPartyIds,". etc have been assigned to the sites.")}),i(new Error(d))}else t.beenUsed?i(new Error("".concat(t.beenUsed.leftRegion,"-").concat(t.beenUsed.rightRegion," ID range have been used, please edit again!"))):i();else i(new Error("ID range field is required."))}else i(new Error("ID range field is required."));function c(t,e){var a=t.split(/~|-/)[0],i=e.split(/~|-/)[0];return a-i}}}]}}},watch:{partidform:{handler:function(t){t.rangeInfo&&t.groupName&&t.role?this.submitbtn=!1:this.submitbtn=!0},immediate:!0,deep:!0}},computed:{},methods:{toCheckGroupName:function(){var t=this,e={groupName:this.partidform.groupName,groupId:this.partidform.groupId};Object(d["e"])(e).then(function(e){t.groupNamewarn=!1,t.$refs["groudform"].validateField("groupName",function(t){})}).catch(function(e){t.groupNamewarn=!0,t.$refs["groudform"].validateField("groupName",function(t){})})},submitAction:function(){var t=this;this.$refs["groudform"].validate(function(e){if(e){var a=Object(n["a"])({},t.partidform);a.regions=Object(c["a"])(t.partidform.rangeInfo),"Edit"===t.title?Object(d["g"])(a).then(function(e){Object(d["n"])(a).then(function(e){t.dialogVisible=!1,t.$parent.initList(),t.$message({type:"success",message:"success!",duration:3e3}),t.$refs["groudform"].resetFields()}).catch(function(e){t.beenUsed=e.data,t.$refs["groudform"].validateField("rangeInfo",function(t){})})}).catch(function(e){t.cannotEdit=Object(o["a"])(e.data),t.$refs["groudform"].validateField("rangeInfo",function(t){})}):Object(d["f"])(a).then(function(e){Object(d["l"])(a).then(function(e){t.dialogVisible=!1,t.$parent.initList(),t.$message({type:"success",message:"success!",duration:3e3}),t.$refs["groudform"].resetFields()})}).catch(function(e){t.beenUsed=e.data,t.$refs["groudform"].validateField("rangeInfo",function(t){})})}})},cancelAction:function(){this.dialogVisible=!1,this.$refs["groudform"].resetFields()},toReset:function(){this.cannotEdit=null,this.beenUsed=""},cancelValid:function(t){this.$refs["groudform"].clearValidate(t),this["".concat(t,"warn")]=!1}}},p=u,f=(a("3fc2"),a("2877")),g=Object(f["a"])(p,s,l,!1,null,null,null),m=g.exports,b={name:"PartyId",components:{partyidAdd:m},data:function(){return{title:"",partidform:{},dialogVisible:!1,currentPage:1,total:0,tableData:[],delTtempGroup:"",groupName:"",typeSelect:[{value:0,label:"Type"},{value:1,label:"Guest"},{value:2,label:"Host"}],data:{pageNum:1,pageSize:20}}},created:function(){this.initList()},methods:{initList:function(){var t=this;for(var e in this.data)if(this.data.hasOwnProperty(e)){var a=this.data[e];a||delete this.data[e]}Object(d["m"])(this.data).then(function(e){t.tableData=[],e.data.list.length&&(Object(o["a"])(e.data.list).forEach(function(e){2!==e.status&&(e.rangeInfo=Object(c["b"])(e.federatedGroupDetailDos),t.tableData.push(e))}),t.total=e.data.totalRecord)})},toSearch:function(){this.data.pageNum=1,this.initList()},handleCurrentChange:function(t){this.data.pageNum=t,this.initList()},handleDelete:function(t){this.delTtempGroup=t.groupId,this.groupName=t.groupName,this.dialogVisible=!0},okAction:function(t){var e=this,a={groupId:this.delTtempGroup};Object(d["i"])(a).then(function(t){e.dialogVisible=!1,e.initList(),e.$message({type:"success",message:"Delete successful!",duration:5e3})})},toUser:function(t){this.$store.dispatch("SiteName",t.groupName),this.$router.push({name:"partyuser",path:"/setting/partyuser",query:{groupId:t.groupId,groupName:t.groupName}})},addPartyid:function(){this.title="Add a new ID Group",this.$refs["partyidadd"].dialogVisible=!0,this.$refs["partyidadd"].partidform={role:1},this.$refs["partyidadd"].groupNamewarn=!1,this.$refs["partyidadd"].cannotEdit={sets:[],intervalWithPartyIds:[]},this.$refs["partyidadd"].beenUsed=!1},handleEdit:function(t){this.title="Edit",this.$refs["partyidadd"].dialogVisible=!0,this.$refs["partyidadd"].partidform=Object(n["a"])({},t),this.$refs["partyidadd"].groupNamewarn=!1,this.$refs["partyidadd"].cannotEdit={sets:[],intervalWithPartyIds:[]},this.$refs["partyidadd"].beenUsed=!1}}},h=b,v=(a("ae8e"),Object(f["a"])(h,i,r,!1,null,null,null));e["default"]=v.exports},ae8e:function(t,e,a){"use strict";var i=a("ece8"),r=a.n(i);r.a},ece8:function(t,e,a){}}]);